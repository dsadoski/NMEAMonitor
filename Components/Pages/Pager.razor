@using Microsoft.AspNetCore.Components
@using System.Reflection.Metadata


<div style="text-align: center;">
@if (PrevButtonVisible)
    {
        <button   @onclick="PrevPage">⬅️</button>
    }
    <span style="margin: 0 1rem;">Page @((currentPage + 1))</span>
    @if (NextButtonVisible)
    {
        <button @onclick="NextPage">➡️</button>
    }
    
</div>

<DynamicComponent Type="@pages[currentPage]" />


@code {
    private int currentPage = 0;
    bool PrevButtonVisible = true;
    bool NextButtonVisible = true;
    private readonly Type[] pages = new[]
    {
        typeof(Page2),
        typeof(Page1),
        typeof(Page3)
    };
    protected override void OnInitialized()
    {
        ShowButtons();
    }
    void NextPage()
    {
        if ((currentPage + 1) < pages.Length)
        {
            currentPage = (currentPage + 1);
        }
        ShowButtons();
    }
    void PrevPage()
    {
        if ((currentPage - 1 + pages.Length) >= 0)
        {
            currentPage = currentPage - 1;
        }
        ShowButtons();
    }

    void ShowButtons()
    {
        if(currentPage >0)
        {
            PrevButtonVisible = true;
        }
        else
        {
            PrevButtonVisible = false;
        }
        if(currentPage < (pages.Length -1))
        {
            NextButtonVisible = true;
        }
        else
        {
            NextButtonVisible = false;
        }
    }
}


